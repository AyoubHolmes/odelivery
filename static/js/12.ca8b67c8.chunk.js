(this.webpackJsonpodeliveryui=this.webpackJsonpodeliveryui||[]).push([[12],{119:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a.n(n),r=a(379);function l(e){return i.a.createElement(r.a,{component:"h1",variant:"h6",color:"primary",gutterBottom:!0},e.children)}},131:function(e,t,a){"use strict";var n=a(13),i=a(0),r=a.n(i),l=a(703),o=a(707),c=a(706),u=a(704),d=a(705),s=a(119),m=a(152),f=a.n(m),p=a(153),b=a.n(p),E=a(154),g=a.n(E),h=a(3),v=a(46),y=a(114);t.a=Object(h.withRouter)((function(e){var t=Object(i.useContext)(y.a);return Object(i.useEffect)((function(){console.log(e.rows)}),[e.rows]),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,e.title),r.a.createElement(l.a,{size:"small"},r.a.createElement(u.a,null,r.a.createElement(d.a,null,e.header.map((function(e,t){return r.a.createElement(c.a,{key:t},e)})),e.actions?r.a.createElement(c.a,null,"actions"):null)),r.a.createElement(o.a,null,e.rows.map((function(a,i){return r.a.createElement(d.a,{key:i},Object.keys(a).filter((function(e){return"productID"!==e&&"shipmentID"!==e})).map((function(e,t){return r.a.createElement(c.a,{key:t},a[e])})),e.productRowActions?r.a.createElement(c.a,null,r.a.createElement("button",{onClick:function(){return e.editProductHandler(Object(n.a)({},a))},className:"btn text-primary"},r.a.createElement(f.a,null)),r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Are you sure?")&&v.a.deleteProduct(e).then((function(){v.a.deleteShipmentByProductID(e),t.fetchData()}))}(i)},className:"btn text-danger"},r.a.createElement(b.a,null))):null,e.shipmentRowActions&&"Pr\xe9s"===a.status?r.a.createElement(c.a,null,r.a.createElement("button",{onClick:function(){return e.editShipmentHandler(Object(n.a)({},a))},className:"btn text-primary"},r.a.createElement(f.a,null)),r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Are you sure?")&&v.a.deleteShipment(e.shipmentID).then(t.fetchData).then((function(){if("Pr\xe9s"===e.status){var a=t.data.tickets.find((function(e){return"Pr\xe9s"===e.status}));a.shipments=a.shipments.filter((function(t){return t!==e.shipmentID})),v.a.editTicket(a,a.id)}}))}(a)},className:"btn text-danger"},r.a.createElement(b.a,null))):null,e.ticketRowActions?r.a.createElement(c.a,null,r.a.createElement("button",{onClick:function(){return e.openTicketHandler(a.uuid)},className:"btn text-danger"},r.a.createElement(g.a,null))):null)})))))}))},143:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(0),i=a.n(n),r=a(44),l=a(754),o=a(746),c=a(709),u=a(780),d=a(748),s=Object(r.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(u.a),m=Object(l.a)((function(e){return{margin:{margin:e.spacing(1)},buttonStyle:{margin:e.spacing(1),borderRadius:4,position:"relative",fontSize:12}}}));function f(e){var t=m();return i.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},i.a.createElement(o.a,{className:t.margin},i.a.createElement(s,{id:"demo-customized-textbox",onChange:e.filterVar})),i.a.createElement(o.a,{className:t.margin},i.a.createElement(c.a,{id:"demo-customized-select-native",onChange:e.filterBy,input:i.a.createElement(s,null)},i.a.createElement("option",{"aria-label":"None",value:""},"Tous"),e.conditions.map((function(e,t){return i.a.createElement("option",{key:t,value:e.value},e.label)})))),i.a.createElement(d.a,{type:"submit",className:t.buttonStyle,variant:"contained",color:"primary",onClick:e.filter},i.a.createElement("i",{className:"fas fa-filter"})," "," ","Filtre"))}},708:function(e,t,a){},776:function(e,t,a){"use strict";a.r(t);var n=a(13),i=a(117),r=a(0),l=a.n(r),o=(a(708),a(3)),c=a(754),u=a(114),d=a(766),s=a(745),m=a(131),f=a(379),p=a(347),b=a.n(p),E=a(143),g=a(748),h=a(783),v=a(711),y=a(768),j=a(713),O=a(712),C=a(710),x=a(146),P=a(46),k=a(247),S=a.n(k),w=function(e){var t=Object(r.useContext)(u.a),a=Object(r.useState)({title:"",unitPrice:0,initialQuantity:0,sold:0}),o=Object(i.a)(a,2),c=o[0],d=o[1];Object(r.useEffect)((function(){document.title="Ajout de Produit"}),[]);var s=Object(x.a)(),m=Object(C.a)(s.breakpoints.down("sm"));return l.a.createElement("div",null,l.a.createElement(v.a,{fullScreen:m,open:e.openAdd,onClose:e.handleCloseAdd,"aria-labelledby":"form-dialog-title"},l.a.createElement(O.a,{id:"form-dialog-title"},"Ajouter un produit"),l.a.createElement(j.a,null,l.a.createElement(h.a,{autoFocus:!0,margin:"dense",id:"titre",label:"Titre",type:"text",onChange:function(e){return d(Object(n.a)({},c,{title:e.target.value}))},fullWidth:!0}),l.a.createElement(h.a,{autoFocus:!0,margin:"dense",id:"initialQuantity",label:"Quantit\xe9 Initial",type:"number",onChange:function(e){return d(Object(n.a)({},c,{initialQuantity:+e.target.value}))},fullWidth:!0}),l.a.createElement(h.a,{autoFocus:!0,margin:"dense",id:"unitPrice",label:"Prix",type:"number",onChange:function(e){return d(Object(n.a)({},c,{unitPrice:+e.target.value}))},fullWidth:!0})),l.a.createElement(y.a,null,l.a.createElement(g.a,{onClick:e.handleCloseAdd,color:"primary"},"Annuler"),l.a.createElement(g.a,{onClick:function(){console.log(c),P.a.addProduct(Object(n.a)({},c,{id:S()()})).then((function(){t.fetchData(),e.handleCloseAdd()}))},color:"primary"},"Ajouter"))))},A=function(e){var t=Object(r.useContext)(u.a),a=Object(r.useState)({title:"",unitPrice:0,initialQuantity:0,sold:0}),o=Object(i.a)(a,2),c=o[0],d=o[1];Object(r.useEffect)((function(){document.title="Ajout de Produit",console.log(e.productToEdit),d(Object(n.a)({},e.productToEdit))}),[e.productToEdit]);var s=Object(x.a)(),m=Object(C.a)(s.breakpoints.down("sm"));return l.a.createElement("div",null,l.a.createElement(v.a,{fullScreen:m,open:e.openEdit,onClose:e.handleCloseEdit,"aria-labelledby":"form-dialog-title"},l.a.createElement(O.a,{id:"form-dialog-title"},"Modifer le produit"),l.a.createElement(j.a,null,l.a.createElement(h.a,{value:c.title,autoFocus:!0,margin:"dense",id:"titre",label:"Titre",type:"text",onChange:function(e){return d(Object(n.a)({},c,{title:e.target.value}))},fullWidth:!0}),l.a.createElement(h.a,{value:+c.initialQuantity,autoFocus:!0,margin:"dense",id:"initialQuantity",label:"Quantit\xe9 Initial",type:"number",onChange:function(e){return d(Object(n.a)({},c,{initialQuantity:+e.target.value}))},fullWidth:!0}),l.a.createElement(h.a,{value:+c.unitPrice,autoFocus:!0,margin:"dense",id:"unitPrice",label:"Prix",type:"number",onChange:function(e){return d(Object(n.a)({},c,{unitPrice:+e.target.value}))},fullWidth:!0})),l.a.createElement(y.a,null,l.a.createElement(g.a,{onClick:e.handleCloseEdit,color:"primary"},"Annuler"),l.a.createElement(g.a,{onClick:function(){console.log(e.productToEdit),P.a.editProduct(c,e.productToEdit.productID).then((function(){t.fetchData(),e.handleCloseEdit()}))},color:"primary"},"Modifer"))))},I=Object(c.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:290},fixedHeight2:{height:140}}})),Q=function(e,t,a,n,i,r,l){return{id:e,title:t,unitPrice:a,sold:n,left:i,initialQuantity:r,productID:l}};t.default=Object(o.withRouter)((function(e){var t=Object(r.useContext)(u.a),a=Object(r.useState)([]),o=Object(i.a)(a,2),c=o[0],p=o[1],h=Object(r.useState)(""),v=Object(i.a)(h,2),y=v[0],j=v[1],O=Object(r.useState)(""),C=Object(i.a)(O,2),x=C[0],P=C[1],k=Object(r.useState)(!1),S=Object(i.a)(k,2),D=S[0],F=S[1],T=Object(r.useState)(!1),R=Object(i.a)(T,2),N=R[0],B=R[1],H=Object(r.useState)({}),W=Object(i.a)(H,2),z=W[0],V=W[1],q=function(){if(console.log(t.data.products),""!==y&&"left"!==y){var e=new RegExp(x),a=[];"id"!==y?a=t.data.products.filter((function(t){return(""+t[y]).match(e)})):+x<t.data.products.length&&(a=[t.data.products[+x]]);var n=a.map((function(e,a){for(var n=t.data.shipments.filter((function(e){return("Livr\xe9"===e.status||"Factur\xe9"===e.status)&&e.productID===a})),i=0,r=0;r<n.length;r++)i+=n[r].quantity;var l=Q(t.data.products.indexOf(e),e.title,e.unitPrice,i,e.initialQuantity-i,e.initialQuantity,e.id);return console.log(l),l}));p(n)}else if("left"===y){var i=t.data.products.map((function(e,a){for(var n=t.data.shipments.filter((function(e){return("Livr\xe9"===e.status||"Factur\xe9"===e.status)&&e.productID===a})),i=0,r=0;r<n.length;r++)i+=n[r].quantity;var l=Q(t.data.products.indexOf(e),e.title,e.unitPrice,i,e.initialQuantity-i,e.initialQuantity,e.id);return console.log(l),l}));i=i.filter((function(e){return e.left===+x})),p(i)}else{var r=t.data.products?t.data.products.map((function(e,a){var n=t.data.shipments.filter((function(t){return("Livr\xe9"===t.status||"Factur\xe9"===t.status)&&t.productID===e.id})),i=0;console.log(n);for(var r=0;r<n.length;r++)i+=n[r].quantity;var l=Q(t.data.products.indexOf(e),e.title,e.unitPrice,i,e.initialQuantity-i,e.initialQuantity,e.id);return console.log(l),l})):[];console.log(r),p(r)}};Object(r.useEffect)((function(){document.title="Produits | Odelivery",q()}),[t.data.products]);var L=I();return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{item:!0,xs:12},l.a.createElement("div",{style:{float:"left"}},l.a.createElement(f.a,{component:"h1",variant:"h4",color:"primary",gutterBottom:!0},"Produits",l.a.createElement(g.a,{color:"primary","aria-label":"Add Product",onClick:function(){F(!0)},component:"span"},l.a.createElement(b.a,null))))),l.a.createElement(d.a,{item:!0,xs:12},l.a.createElement("div",{style:{float:"left"}},l.a.createElement(E.a,{addFunc:function(){return e.history.push(e.match.url+"/add")},filterBy:function(e){j(e.target.value)},filterVar:function(e){P(e.target.value)},filter:q,conditions:[{value:"id",label:"ID"},{value:"title",label:"Titre"},{value:"unitPrice",label:"Prix d'unit\xe9"},{value:"sold",label:"Vendu"},{value:"left",label:"Reste"},{value:"initialQuantity",label:"Quantit\xe9 Initiale"}]}))),l.a.createElement(d.a,{item:!0,xs:12},l.a.createElement(s.a,{className:L.paper},l.a.createElement(m.a,{header:["ID","Titre","Prix d'unit\xe9","Vendu","Reste","Quantit\xe9 Initiale"],rows:c,actions:!0,productRowActions:!0,editProductHandler:function(e){console.log(e),V(Object(n.a)({},e)),B(!0),console.log("edit test")}}))),l.a.createElement(w,{handleCloseAdd:function(){F(!1)},openAdd:D}),l.a.createElement(A,{handleCloseEdit:function(){B(!1)},openEdit:N,productToEdit:z}))}))}}]);
//# sourceMappingURL=12.ca8b67c8.chunk.js.map