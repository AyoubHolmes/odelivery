(this.webpackJsonpodeliveryui=this.webpackJsonpodeliveryui||[]).push([[13],{119:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),l=a(379);function i(e){return r.a.createElement(l.a,{component:"h1",variant:"h6",color:"primary",gutterBottom:!0},e.children)}},131:function(e,t,a){"use strict";var n=a(13),r=a(0),l=a.n(r),i=a(703),u=a(707),o=a(706),c=a(704),s=a(705),d=a(119),m=a(152),p=a.n(m),f=a(153),b=a.n(f),h=a(154),g=a.n(h),E=a(3),v=a(46),y=a(114);t.a=Object(E.withRouter)((function(e){var t=Object(r.useContext)(y.a);return Object(r.useEffect)((function(){console.log(e.rows)}),[e.rows]),l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null,e.title),l.a.createElement(i.a,{size:"small"},l.a.createElement(c.a,null,l.a.createElement(s.a,null,e.header.map((function(e,t){return l.a.createElement(o.a,{key:t},e)})),e.actions?l.a.createElement(o.a,null,"actions"):null)),l.a.createElement(u.a,null,e.rows.map((function(a,r){return l.a.createElement(s.a,{key:r},Object.keys(a).filter((function(e){return"productID"!==e&&"shipmentID"!==e})).map((function(e,t){return l.a.createElement(o.a,{key:t},a[e])})),e.productRowActions?l.a.createElement(o.a,null,l.a.createElement("button",{onClick:function(){return e.editProductHandler(Object(n.a)({},a))},className:"btn text-primary"},l.a.createElement(p.a,null)),l.a.createElement("button",{onClick:function(){return function(e){window.confirm("Are you sure?")&&v.a.deleteProduct(e).then((function(){v.a.deleteShipmentByProductID(e),t.fetchData()}))}(r)},className:"btn text-danger"},l.a.createElement(b.a,null))):null,e.shipmentRowActions&&"Pr\xe9s"===a.status?l.a.createElement(o.a,null,l.a.createElement("button",{onClick:function(){return e.editShipmentHandler(Object(n.a)({},a))},className:"btn text-primary"},l.a.createElement(p.a,null)),l.a.createElement("button",{onClick:function(){return function(e){window.confirm("Are you sure?")&&v.a.deleteShipment(e.shipmentID).then(t.fetchData).then((function(){if("Pr\xe9s"===e.status){var a=t.data.tickets.find((function(e){return"Pr\xe9s"===e.status}));a.shipments=a.shipments.filter((function(t){return t!==e.shipmentID})),v.a.editTicket(a,a.id)}}))}(a)},className:"btn text-danger"},l.a.createElement(b.a,null))):null,e.ticketRowActions?l.a.createElement(o.a,null,l.a.createElement("button",{onClick:function(){return e.openTicketHandler(a.uuid)},className:"btn text-danger"},l.a.createElement(g.a,null))):null)})))))}))},143:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),r=a.n(n),l=a(44),i=a(754),u=a(746),o=a(709),c=a(780),s=a(748),d=Object(l.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))(c.a),m=Object(i.a)((function(e){return{margin:{margin:e.spacing(1)},buttonStyle:{margin:e.spacing(1),borderRadius:4,position:"relative",fontSize:12}}}));function p(e){var t=m();return r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement(u.a,{className:t.margin},r.a.createElement(d,{id:"demo-customized-textbox",onChange:e.filterVar})),r.a.createElement(u.a,{className:t.margin},r.a.createElement(o.a,{id:"demo-customized-select-native",onChange:e.filterBy,input:r.a.createElement(d,null)},r.a.createElement("option",{"aria-label":"None",value:""},"Tous"),e.conditions.map((function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)})))),r.a.createElement(s.a,{type:"submit",className:t.buttonStyle,variant:"contained",color:"primary",onClick:e.filter},r.a.createElement("i",{className:"fas fa-filter"})," "," ","Filtre"))}},714:function(e,t,a){},777:function(e,t,a){"use strict";a.r(t);var n=a(117),r=a(0),l=a.n(r),i=(a(714),a(3)),u=a(754),o=a(114),c=a(766),s=a(745),d=a(131),m=a(379),p=a(347),f=a.n(p),b=a(143),h=a(748),g=a(13),E=a(783),v=a(711),y=a(768),j=a(713),O=a(712),C=a(710),x=a(746),k=a(778),P=a(719),S=a(146),F=a(747),D=a(46),N=a(247),I=a.n(N),A=function(e){var t=Object(r.useContext)(o.a),a={name:"",adress:"",phoneNumber:"",city:"",clientID:D.a.auth.currentUser.uid,price:0,productID:"",productTitle:"",quantity:0,status:"Pr\xe9s",note:""},i=Object(r.useState)(a),u=Object(n.a)(i,2),c=u[0],s=u[1],d=Object(r.useState)(!1),m=Object(n.a)(d,2),p=m[0],f=m[1],b=Object(S.a)(),N=Object(C.a)(b.breakpoints.down("sm"));return t.data?l.a.createElement("div",null,l.a.createElement(v.a,{fullScreen:N,open:e.openAdd,onClose:e.handleCloseAdd,"aria-labelledby":"form-dialog-title"},l.a.createElement(O.a,{id:"form-dialog-title"},"Ajouter un colis"),l.a.createElement(j.a,null,l.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"name",label:"Nom",type:"text",onChange:function(e){return s(Object(g.a)({},c,{name:e.target.value}))},fullWidth:!0}),l.a.createElement(x.a,null,l.a.createElement(P.a,{htmlFor:"Produit"},"Produit"),l.a.createElement(k.a,{native:!0,onChange:function(e){if("newProd"!==e.target.value){if(f(!1),""!==e.target.value){console.log(e.target.value);var a=t.data.products.find((function(t){return t.id===e.target.value}));console.log(a),s(Object(g.a)({},c,{productID:e.target.value,productTitle:a.title}))}}else f(!0)},input:l.a.createElement(F.a,{id:"Produit"})},l.a.createElement("option",{"aria-label":"None",value:""}),l.a.createElement("option",{value:"newProd"},"Un nouveau produit"),t.data.products.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.title)})))),p?l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"titre",label:"Titre",type:"text",onChange:function(e){return s(Object(g.a)({},c,{title:e.target.value}))},fullWidth:!0}),l.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"initialQuantity",label:"Quantit\xe9 Initial",type:"number",onChange:function(e){return s(Object(g.a)({},c,{initialQuantity:+e.target.value}))},fullWidth:!0}),l.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"unitPrice",label:"Prix",type:"number",onChange:function(e){return s(Object(g.a)({},c,{unitPrice:+e.target.value}))},fullWidth:!0})):null,l.a.createElement(E.a,{autoFocus:!0,value:c.quantity,margin:"dense",id:"quantity",label:"Quantit\xe9",type:"number",onChange:function(e){return s(Object(g.a)({},c,{quantity:+e.target.value,price:""!==c.productID?+t.data.products.find((function(e){return e.id===c.productID})).unitPrice*e.target.value:0}))},fullWidth:!0}),l.a.createElement(E.a,{autoFocus:!0,value:""!==c.productID?c.price:null,margin:"dense",id:"price",label:"Prix",type:"number",onChange:function(e){return s(Object(g.a)({},c,{price:+e.target.value}))},fullWidth:!0}),l.a.createElement(x.a,null,l.a.createElement(P.a,{htmlFor:"Ville"},"Ville"),l.a.createElement(k.a,{native:!0,value:c.city,onChange:function(e){return s(Object(g.a)({},c,{city:e.target.value}))},input:l.a.createElement(F.a,{id:"Ville"})},l.a.createElement("option",{"aria-label":"None",value:""}),["Casablanca","Mohammedia","Rabat","Agadir","Marrakech"].map((function(e,t){return l.a.createElement("option",{key:t,value:e},e)})))),l.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"adress",label:"Adresse",type:"text",onChange:function(e){return s(Object(g.a)({},c,{adress:e.target.value}))},fullWidth:!0}),l.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"phoneNumber",label:"Telephone",type:"text",onChange:function(e){return s(Object(g.a)({},c,{phoneNumber:e.target.value}))},fullWidth:!0}),l.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"note",label:"Remarque",type:"text",onChange:function(e){return s(Object(g.a)({},c,{note:e.target.value}))},fullWidth:!0})),l.a.createElement(y.a,null,l.a.createElement(h.a,{onClick:e.handleCloseAdd,color:"primary"},"Annuler"),l.a.createElement(h.a,{onClick:function(){D.a.addShipment(c).then((function(a){if(t.fetchData(),"Pr\xe9s"===c.status){var n=t.data.tickets.find((function(e){return"Pr\xe9s"===e.status&&e.shipments.length<=9}));console.log(n),n?(n.shipments.push(a),D.a.editTicket(n,n.id)):D.a.addTicket({uuid:I()(),status:"Pr\xe9s",shipments:[a]})}e.handleCloseAdd()}))},color:"primary"},"Ajouter")))):null},w=function(e){var t=Object(r.useContext)(o.a),a=Object(r.useState)({}),i=Object(n.a)(a,2),u=i[0],c=i[1],s=Object(r.useState)(!1),d=Object(n.a)(s,2),m=d[0],p=d[1];Object(r.useEffect)((function(){document.title="Ajout de Produit",console.log(e.shipmentToEdit),c(Object(g.a)({},e.shipmentToEdit))}),[e.shipmentToEdit]);var f=Object(S.a)(),b=Object(C.a)(f.breakpoints.down("sm"));return t.data?l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{fullScreen:b,open:e.openEdit,onClose:e.handleCloseEdit,"aria-labelledby":"form-dialog-title"},l.a.createElement(O.a,{id:"form-dialog-title"},"Modifier le colis"),l.a.createElement(j.a,null,l.a.createElement(E.a,{value:u.name,autoFocus:!0,margin:"dense",id:"name",label:"Nom",type:"text",onChange:function(e){return c(Object(g.a)({},u,{name:e.target.value}))},fullWidth:!0}),l.a.createElement(x.a,null,l.a.createElement(P.a,{htmlFor:"Produit"},"Produit"),l.a.createElement(k.a,{native:!0,value:u.productID,onChange:function(e){if("newProd"!==e.target.value){if(p(!1),""!==e.target.value){var a=t.data.products.find((function(t){return t.id===e.target.value}));c(Object(g.a)({},u,{productID:e.target.value,productTitle:a?a.title:""}))}}else p(!0)},input:l.a.createElement(F.a,{id:"Produit"})},l.a.createElement("option",{"aria-label":"None",value:""}),l.a.createElement("option",{value:"newProd"},"Un nouveau produit"),t.data.products.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.title)})))),m?l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{value:u.title,autoFocus:!0,margin:"dense",id:"titre",label:"Titre",type:"text",onChange:function(e){return c(Object(g.a)({},u,{title:e.target.value}))},fullWidth:!0}),l.a.createElement(E.a,{value:u.initialQuantity,autoFocus:!0,margin:"dense",id:"initialQuantity",label:"Quantit\xe9 Initial",type:"number",onChange:function(e){return c(Object(g.a)({},u,{initialQuantity:+e.target.value}))},fullWidth:!0}),l.a.createElement(E.a,{value:u.unitPrice,autoFocus:!0,margin:"dense",id:"unitPrice",label:"Prix",type:"number",onChange:function(e){return c(Object(g.a)({},u,{unitPrice:+e.target.value}))},fullWidth:!0})):null,l.a.createElement(E.a,{value:u.quantity,autoFocus:!0,margin:"dense",id:"quantity",label:"Quantit\xe9",type:"number",onChange:function(e){return c(Object(g.a)({},u,{quantity:+e.target.value,price:""!==u.productID?+t.data.products.find((function(e){return e.id===u.productID})).unitPrice*e.target.value:0}))},fullWidth:!0}),l.a.createElement(E.a,{autoFocus:!0,value:""!==u.productID?u.price:null,margin:"dense",id:"price",label:"Prix",type:"number",onChange:function(e){return c(Object(g.a)({},u,{price:+e.target.value}))},fullWidth:!0}),l.a.createElement(x.a,null,l.a.createElement(P.a,{htmlFor:"Ville"},"Ville"),l.a.createElement(k.a,{native:!0,value:u.city,onChange:function(e){return c(Object(g.a)({},u,{city:e.target.value}))},input:l.a.createElement(F.a,{id:"Ville"})},l.a.createElement("option",{"aria-label":"None",value:""}),["Casablanca","Mohammedia","Rabat","Agadir","Marrakech"].map((function(e,t){return l.a.createElement("option",{key:t,value:e},e)})))),l.a.createElement(E.a,{value:u.adress,autoFocus:!0,margin:"dense",id:"adress",label:"Adresse",type:"text",onChange:function(e){return c(Object(g.a)({},u,{adress:e.target.value}))},fullWidth:!0}),l.a.createElement(E.a,{autoFocus:!0,value:u.phoneNumber,margin:"dense",id:"phoneNumber",label:"Telephone",type:"text",onChange:function(e){return c(Object(g.a)({},u,{phoneNumber:e.target.value}))},fullWidth:!0}),l.a.createElement(E.a,{autoFocus:!0,value:u.note,margin:"dense",id:"note",label:"Remarque",type:"text",onChange:function(e){return c(Object(g.a)({},u,{note:e.target.value}))},fullWidth:!0})),l.a.createElement(y.a,null,l.a.createElement(h.a,{onClick:e.handleCloseEdit,color:"primary"},"Annuler"),l.a.createElement(h.a,{onClick:function(){D.a.editShipment(u,u.shipmentID).then(t.fetchData).then((function(){if("Pr\xe9s"===u.status){var a=t.data.tickets.find((function(e){return"Waiting For Pickup"===e.status})),n=u.shipmentID;console.log(n),a?(a.shipments.push(n),console.log(a.shipments),D.a.editTicket(a,a.id)):D.a.addTicket({uuid:I()(),status:"Pr\xe9s",shipments:[n]})}e.handleCloseEdit()}))},color:"primary"},"Ajouter")))):null},T=Object(u.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:290},fixedHeight2:{height:140}}})),W=function(e,t,a,n,r,l,i,u,o,c,s,d){return{id:e,product:t,price:a,quantity:n,name:r,address:l,city:i,phoneNumber:u,status:o,note:c,productID:s,shipmentID:d}};t.default=Object(i.withRouter)((function(e){var t=Object(r.useContext)(o.a),a=Object(r.useState)([]),i=Object(n.a)(a,2),u=i[0],p=i[1],g=Object(r.useState)(""),E=Object(n.a)(g,2),v=E[0],y=E[1],j=Object(r.useState)(""),O=Object(n.a)(j,2),C=O[0],x=O[1],k=Object(r.useState)(!1),P=Object(n.a)(k,2),S=P[0],F=P[1],D=Object(r.useState)(!1),N=Object(n.a)(D,2),I=N[0],R=N[1],q=Object(r.useState)({}),Q=Object(n.a)(q,2),V=Q[0],B=Q[1],H=function(){if(t)if(""!==v){var e=new RegExp(C),a=[];"id"!==v?a=t.data.shipments.filter((function(t){return(""+t[v]).match(e)})):+C<t.data.shipments.length&&(a=[t.data.shipments[+C]]);var n=a.map((function(e){return W(t.data.shipments.indexOf(e),e.productTitle,e.price,e.quantity,e.name,e.adress,e.city,e.phoneNumber,e.status,e.note,e.productID,e.id)}));p(n)}else{var r=t.data.shipments?t.data.shipments.map((function(e,a){return W(t.data.shipments.indexOf(e),e.productTitle,e.price,e.quantity,e.name,e.adress,e.city,e.phoneNumber,e.status,e.note,e.productID,e.id)})):[];console.log(r),p(r)}};Object(r.useEffect)((function(){document.title="Colis | Odelivery",H()}),[t.data.shipments]);var M=T();return t?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{item:!0,xs:12},l.a.createElement("div",{style:{float:"left"}},l.a.createElement(m.a,{component:"h1",variant:"h4",color:"primary",gutterBottom:!0},"Colis",l.a.createElement(h.a,{color:"primary","aria-label":"Add Shipment",onClick:function(){F(!0)},component:"span"},l.a.createElement(f.a,null))))),l.a.createElement(c.a,{item:!0,xs:12},l.a.createElement("div",{style:{float:"left"}},l.a.createElement(b.a,{filterBy:function(e){y(e.target.value)},filterVar:function(e){x(e.target.value)},filter:H,conditions:[{value:"id",label:"ID"},{value:"productTitle",label:"Produit"},{value:"price",label:"Prix"},{value:"quantity",label:"Quantit\xe9"},{value:"name",label:"Nom"},{value:"adress",label:"Adresse"},{value:"city",label:"Ville"},{value:"phoneNumber",label:"Telephone"},{value:"status",label:"Status"}]}))),l.a.createElement(c.a,{item:!0,xs:12},l.a.createElement(s.a,{className:M.paper},l.a.createElement(d.a,{header:["ID","Produit","Prix","Quantit\xe9","Nom","Adresse","Ville","Telephone","Status","Remarque"],rows:u,actions:!0,shipmentRowActions:!0,editShipmentHandler:function(e){console.log(e),B(e),R(!0)}}))),l.a.createElement(A,{handleCloseAdd:function(){F(!1)},openAdd:S}),l.a.createElement(w,{handleCloseEdit:function(){R(!1)},openEdit:I,shipmentToEdit:V})):null}))}}]);
//# sourceMappingURL=13.0c7e6f1c.chunk.js.map