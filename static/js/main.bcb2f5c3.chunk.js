(this.webpackJsonpodeliveryui=this.webpackJsonpodeliveryui||[]).push([[5],{22:function(t,e,r){"use strict";var n=r(17),a=r(18),u=r(33),c=r(34),i=r(0),s=r.n(i);e.a=function(t){return function(e){Object(c.a)(i,e);var r=Object(u.a)(i);function i(){var t;Object(n.a)(this,i);for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];return(t=r.call.apply(r,[this].concat(a))).state={component:null},t}return Object(a.a)(i,[{key:"componentDidMount",value:function(){var e=this;t().then((function(t){e.setState({component:t.default})}))}},{key:"render",value:function(){var t=this.state.component;return t?s.a.createElement(t,this.props):null}}]),i}(i.Component)}},46:function(t,e,r){"use strict";var n=r(13),a=r(16),u=r(2),c=r.n(u),i=r(8),s=r(17),o=r(18),h=r(36),l=r.n(h),d=(r(76),r(78),r(80),{apiKey:"AIzaSyDLWOVsf0voqWAfaBSm2YV8Nc2vFjsWWeI",authDomain:"odeliveryio2.firebaseapp.com",databaseURL:"https://odeliveryio2.firebaseio.com",projectId:"odeliveryio2",storageBucket:"odeliveryio2.appspot.com",messagingSenderId:"355804492158",appId:"1:355804492158:web:f9cc73f6e54909cd6a432f",measurementId:"G-7YSBSBFSGE"}),p=function(){function t(){var e=this;Object(s.a)(this,t),this.login=function(t,r){return e.auth.signInWithEmailAndPassword(t,r)},this.logout=function(){return e.auth.signOut()},l.a.initializeApp(d),this.auth=l.a.auth(),this.db=l.a.firestore()}return Object(o.a)(t,[{key:"register",value:function(){var t=Object(i.a)(c.a.mark((function t(e,r,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.auth.createUserWithEmailAndPassword(r,n);case 2:return t.abrupt("return",this.auth.currentUser.updateProfile({displayName:e}));case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"addPersonalData",value:function(t){return this.auth.currentUser?this.db.doc("users_personal_data/".concat(this.auth.currentUser.uid)).set({data:t,products:[]}):alert("Not Authorized")}},{key:"addProduct",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var r,n,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return t.next=4,this.db.collection("users_personal_data").doc(this.auth.currentUser.uid).get();case 4:return r=t.sent,n=r.get("products"),(u=Object(a.a)(n)).push(e),t.abrupt("return",this.db.collection("users_personal_data").doc(this.auth.currentUser.uid).set({products:u},{merge:!0}));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"editProduct",value:function(){var t=Object(i.a)(c.a.mark((function t(e,r){var n,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return t.next=4,this.db.collection("users_personal_data").doc(this.auth.currentUser.uid).get();case 4:return n=t.sent,a=n.get("products"),u=a.map((function(t){return console.log(r),t.id===r?(console.log("found it"),e):t})),t.abrupt("return",this.db.doc("users_personal_data/".concat(this.auth.currentUser.uid)).set({products:u},{merge:!0}));case 8:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"deleteProduct",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var r,n,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return t.next=4,this.db.collection("users_personal_data").doc(this.auth.currentUser.uid).get();case 4:return r=t.sent,n=r.get("products"),(u=Object(a.a)(n)).splice(e,1),t.abrupt("return",this.db.doc("users_personal_data/".concat(this.auth.currentUser.uid)).set({products:u},{merge:!0}));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getShipments",value:function(){var t=this.auth.currentUser.uid;return this.db.collection("shipments").get().then((function(e){var r=[];return e.forEach((function(e){t===e.data().clientID&&r.push(Object(n.a)({},e.data(),{id:e.id}))})),console.log(r),r}))}},{key:"editShipment",value:function(){var t=Object(i.a)(c.a.mark((function t(e,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return t.next=4,this.db.collection("shipments").doc(r).set(Object(n.a)({},e),{merge:!0});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"addShipment",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return r=this.db.collection("shipments").doc(),t.next=5,r.set(Object(n.a)({},e)).then((function(){return r.id}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteShipment",value:function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return t.next=4,this.db.collection("shipments").doc(e).delete();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteShipmentByProductID",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var r,n=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return r=this.auth.currentUser.uid,t.next=5,this.db.collection("shipments").get().then((function(t){var n=[];return t.forEach((function(t){r===t.data().clientID&&e===t.data().productID&&"Preparing"===t.data().status&&n.push(t.id)})),n}));case 5:t.sent.map((function(t){return n.db.collection("shipments").doc(t).delete()}));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"editTicket",value:function(){var t=Object(i.a)(c.a.mark((function t(e,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return t.next=4,this.db.collection("tickets").doc(r).set(Object(n.a)({},e));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"addTicket",value:function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return t.next=4,this.db.collection("tickets").doc().set(Object(n.a)({},e));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteTicket",value:function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.currentUser){t.next=2;break}return t.abrupt("return",alert("Not Authorized"));case 2:return t.next=4,this.db.collection("tickets").doc(e).delete();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"isInitialized",value:function(){var t=this;return new Promise((function(e){t.auth.onAuthStateChanged(e)}))}},{key:"getCurrentUsername",value:function(){return this.auth.currentUser&&this.auth.currentUser.displayName}},{key:"getCurrentUserData",value:function(){var t=Object(i.a)(c.a.mark((function t(){var e,r,u,i,s,o,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.auth.currentUser.uid,t.next=3,this.db.collection("users_personal_data").doc(e).get();case 3:return r=t.sent,u=r.get("data"),i=r.get("products"),t.next=8,this.db.collection("shipments").get().then((function(t){var r=[];return t.forEach((function(t){console.log(t.data()),e===t.data().clientID&&r.push(Object(n.a)({},t.data(),{id:t.id}))})),r}));case 8:return s=t.sent,t.next=11,this.db.collection("tickets").get().then((function(t){var e=[];return t.forEach((function(t){e.push(Object(n.a)({},t.data(),{id:t.id}))})),e}));case 11:return o=t.sent,t.next=14,this.db.collection("bills").get().then((function(t){var e=[];return t.forEach((function(t){e.push(Object(n.a)({},t.data(),{id:t.id}))})),e}));case 14:return h=t.sent,t.abrupt("return",{id:r.id,data:Object(n.a)({},u,{fullName:this.auth.currentUser.displayName}),products:Object(a.a)(i),shipments:Object(a.a)(s),tickets:Object(a.a)(o),bills:Object(a.a)(h)});case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();e.a=new p},68:function(t,e,r){t.exports=r(87)},73:function(t,e,r){},74:function(t,e,r){},87:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),u=r(47),c=r.n(u),i=(r(73),r(17)),s=r(18),o=r(33),h=r(34),l=(r(74),r(22)),d=r(3),p=r(106),f=r(46),b=r(61),m=Object(l.a)((function(){return Promise.all([r.e(0),r.e(2),r.e(3),r.e(10)]).then(r.bind(null,774))})),v=Object(l.a)((function(){return Promise.all([r.e(0),r.e(2),r.e(3),r.e(17)]).then(r.bind(null,779))})),k=Object(l.a)((function(){return r.e(18).then(r.bind(null,750))})),y=Object(l.a)((function(){return Promise.all([r.e(2),r.e(9),r.e(19)]).then(r.bind(null,775))})),g=function(t){Object(h.a)(r,t);var e=Object(o.a)(r);function r(){var t;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(t=e.call.apply(e,[this].concat(a))).state={firebaseInitialized:!1},t}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var t=this;document.title="Odelivery",f.a.isInitialized().then((function(e){t.setState({firebaseInitialized:e})}))}},{key:"render",value:function(){return!1!==this.state.firebaseInitialized?a.a.createElement("div",{className:"App"},a.a.createElement(d.Switch,null,a.a.createElement(d.Route,{path:"/signup",exact:!0,component:m}),a.a.createElement(d.Route,{path:"/login",exact:!0,component:v}),a.a.createElement(d.Route,{path:"/main",component:k}),a.a.createElement(d.Route,{path:"/admin",component:y}),a.a.createElement(d.Route,{path:"/livreur",component:y}),a.a.createElement(d.Route,{path:"/client",component:y})),a.a.createElement(b.Redirect,{from:"/",to:"/main"})):a.a.createElement("div",{id:"loader"},a.a.createElement(p.a,null))}}]),r}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=r(38);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O.a,{basename:"/odelivery/"},a.a.createElement(g,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[68,6,8]]]);
//# sourceMappingURL=main.bcb2f5c3.chunk.js.map